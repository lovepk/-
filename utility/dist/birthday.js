define(function(c,b,d){function a(g,h){var f=31;h=parseInt(h,10);switch(h){case 4:case 6:case 9:case 11:f=30;break;case 2:f=g%4==0?29:28;break;default:f=31;break;}return f;}function e(f){this.cfg=$.extend({range:[1950,0],onChange:function(){},onError:function(g){}},f);this.init();}e.prototype={init:function(){var h,i,g,f=this;this.elYear=$(this.cfg.year);this.elMonth=$(this.cfg.month);this.elDay=$(this.cfg.day);h=this.elYear.data("value");i=this.elMonth.data("value");g=this.elDay.data("value");this.createYearList();if(h){setTimeout(function(){f.elYear.val(h);},10);}this.createMonthList();if(i){setTimeout(function(){f.elMonth.val(i);},10);}this._dayhtml=this.elDay.html();this.createDayList(h,i);if(g){setTimeout(function(){f.elDay.val(g);},10);}if(i&&g){this.cfg.onChange.call(this,h,i,g);}this.bind();},bind:function(){var f=this;this.elDay.change(function(){var i=f.elYear.val(),g=f.elMonth.val(),h=f.elDay.val();f.cfg.onChange.call(f,i,g,h);});this.elMonth.change(function(){var i=f.elYear.val(),g=f.elMonth.val(),h=f.elDay.val();if(i&&g){f.createDayList(i,g);h=f.elDay.val();}else{f.cfg.onError("请选择年和月");}f.cfg.onChange.call(f,i,g,h);});this.elYear.change(function(){var i=f.elYear.val(),g=f.elMonth.val(),h=f.elDay.val();if(i%4==0&&g==2){f.createDayList(i,g);h=f.elDay.val();}f.cfg.onChange.call(f,i,g,h);});},createYearList:function(){var f=[];start=this.cfg.range[0],end=parseInt(this.cfg.range[1]||0,10);if(end<=0){end=(new Date()).getFullYear()+end;}for(;start<=end;start++){f.push('<option value="'+start+'">'+start+"</option>");}this.elYear.html(this.elYear.html()+f.join(""));},createMonthList:function(){var f=[];for(var g=1;g<=12;g++){f.push('<option value="'+g+'">'+g+"</option>");}this.elMonth.html(this.elMonth.html()+f.join(""));},createDayList:function(j,k){var f=a(j,k),g=[];for(var h=1;h<=f;h++){g.push('<option value="'+h+'">'+h+"</option>");}this.elDay.html(this._dayhtml+g.join(""));}};return function(f){new e(f);};});